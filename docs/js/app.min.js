!function a(e,t,n){function r(i,o){if(!t[i]){if(!e[i]){var s="function"==typeof require&&require;if(!o&&s)return s(i,!0);if(l)return l(i,!0);var u=new Error("Cannot find module '"+i+"'");throw u.code="MODULE_NOT_FOUND",u}var c=t[i]={exports:{}};e[i][0].call(c.exports,function(a){var t=e[i][1][a];return r(t?t:a)},c,c.exports,a,e,t,n)}return t[i].exports}for(var l="function"==typeof require&&require,i=0;i<n.length;i++)r(n[i]);return r}({1:[function(a,e,t){"use strict";e.exports=function(a,e){var t,n=e.hash.type||"middle",r="",l=Number(a.pageCount),i=Number(a.page);e.hash.limit&&(t=+e.hash.limit);var o={};switch(n){case"middle":if("number"==typeof t){var s=0,u=Math.ceil(t/2)-1,c=t-u-1;i+c>l&&(u=t-(l-i)-1),i-u<1&&(u=i-1);for(var b=i-u;s<t&&s<l;)o={n:b},b===i&&(o.active=!0),r+=e.fn(o),b++,s++}else for(var s=1;s<=l;s++)o={n:s},s===i&&(o.active=!0),r+=e.fn(o);break;case"previous":o=1===i?{disabled:!0,n:1}:{n:i-1},r+=e.fn(o);break;case"next":o={},o=i===l?{disabled:!0,n:l}:{n:i+1},r+=e.fn(o);break;case"first":o=1===i?{disabled:!0,n:1}:{n:1},r+=e.fn(o);break;case"last":o=i===l?{disabled:!0,n:l}:{n:l},r+=e.fn(o)}return r}},{}],2:[function(a,e,t){"use strict";var n=a("./services/auth-service"),r=a("./services/data-service"),l=a("./environments/firebase-config"),i=a("./utils/key-generator"),o=a("./services/posts-service"),s=a("./router"),u=a("./services/users-service"),c=a("./utils/templates-loader"),b=firebase.initializeApp(l.firebaseConfig),f=new r.DataService(b),h=new n.AuthService(b),m=new u.UsersService(f),v=new i.KeyGenerator,d=new o.PostsService("posts",h,f,m,v),A=new c.TemplatesLoader,p={category:"Some category",title:"Some title",author:["Some author"],date:"dneska",image:"./images/post-img.jpg",content:"Alabala Alabala Alabala Alabala Alabala Alabala Alabala Alabala Alabala Alabala Alabala Alabala Alabala Alabala Alabala Alabala Alabala Alabala Alabala Alabala Alabala Alabala Alabala Alabala Alabala Alabala Alabala Alabala Alabala Alabala Alabala Alabala Alabala Alabala Alabala Alabala Alabala Alabala Alabala Alabala Alabala Alabala Alabala Alabala Alabala Alabala Alabala Alabala Alabala Alabala Alabala Alabala Alabala Alabala Alabala Alabala Alabala Alabala Alabala AlabalaAlabala Alabala Alabala Alabala Alabala Alabala Alabala Alabala Alabala Alabala Alabala Alabala Alabala Alabala Alabala Alabala Alabala Alabala Alabala AlabalaAlabala Alabala Alabala Alabala Alabala Alabala Alabala Alabala Alabala Alabala Alabala Alabala Alabala Alabala Alabala Alabala Alabala Alabala Alabala Alabala",comments:[{author:"Nick Roach",authorImg:"https://encrypted-tbn1.gstatic.com/images?q=tbn:ANd9GcTYVz_0qO9okRFW3xd-W8ivtDrlfQn7bYoZ7K_kgCEO2aLkLdTu",content:"Comment alabala Comment alabala Comment alabala Comment alabala Comment alabala Comment alabala Comment alabala Comment alabala Comment alabala Comment alabala alabala Comment alabala Comment alabala Comment alabalaComment alabala Comment alabala Comment alabala Comment alabala Comment alabala",date:"March 13, 2010",replies:[{author:"Nick Roach",authorImg:"https://encrypted-tbn1.gstatic.com/images?q=tbn:ANd9GcTYVz_0qO9okRFW3xd-W8ivtDrlfQn7bYoZ7K_kgCEO2aLkLdTu",content:"Inner Comment alabala Comment alabala Comment alabala Comment alabala Comment alabala Inner Comment alabala Comment alabala Comment alabala Comment alabala Comment alabala",date:"March 13, 2010"},{author:"Nick Roach",authorImg:"https://encrypted-tbn1.gstatic.com/images?q=tbn:ANd9GcTYVz_0qO9okRFW3xd-W8ivtDrlfQn7bYoZ7K_kgCEO2aLkLdTu",content:"Inner Comment alabala Comment alabala Comment alabala Comment alabala Comment alabala Inner Comment alabala Comment alabala Comment alabala Comment alabala Comment alabala",date:"March 13, 2010"}]}]};A.get("post").then(function(a){$("main").html(a(p))}),d.findAllPosts().subscribe(console.log),s.router.run("#/")},{"./environments/firebase-config":3,"./router":4,"./services/auth-service":5,"./services/data-service":6,"./services/posts-service":7,"./services/users-service":8,"./utils/key-generator":9,"./utils/templates-loader":10}],3:[function(a,e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.firebaseConfig={apiKey:"AIzaSyD57uhi77W5dNCFej6dorJ0TL29BQJPt98",authDomain:"healthy-world-6d410.firebaseapp.com",databaseURL:"https://healthy-world-6d410.firebaseio.com",storageBucket:"healthy-world-6d410.appspot.com",messagingSenderId:"980620370836"}},{}],4:[function(a,e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.router=Sammy("#content",function(){this.get("#/",function(a){a.$element().html("App Works")})})},{}],5:[function(a,e,t){"use strict";function n(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function a(a,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(a,n.key,n)}}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}();t.AuthService=function(){function a(e){var t=this;n(this,a),this._firebaseAuth=e.auth(),this._firebaseAuth.onAuthStateChanged(function(a){t._authState=a})}return r(a,[{key:"signUpUser",value:function(a,e){return this._firebaseAuth.createUserWithEmailAndPassword(a,e)}},{key:"signInUser",value:function(a,e){return this._firebaseAuth.signInWithEmailAndPassword(a,e)}},{key:"signInWithFacebook",value:function(){var a=new this._firebaseAuth.app.I.auth.FacebookAuthProvider;return this._firebaseAuth.signInWithPopup(a)}},{key:"signOut",value:function(){return this._firebaseAuth.signOut()}},{key:"isAuthenticated",get:function(){return!!this._authState}},{key:"userId",get:function(){return this.isAuthenticated?this._authState.uid:""}}]),a}()},{}],6:[function(a,e,t){"use strict";function n(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function a(a,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(a,n.key,n)}}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}();t.DataService=function(){function a(e){n(this,a),this._databaseRef=e.database().ref(),this._storageRef=e.storage().ref()}return r(a,[{key:"_setQuery",value:function(a,e){return e.orderByKey?a=a.orderByKey():e.orderByValue?a=a.orderByValue():e.orderByChild&&(a=a.orderByChild(e.orderByChild)),e.startAt||e.endAt?(a=e.startAt?a.startAt(e.startAt):a,a=e.endAt?a.endAt(e.endAt):a):e.equalTo&&(a=a.equalTo(e.equalTo)),e.limitToFirst?a=a.limitToFirst(e.limitToFirst):e.limitToLast&&(a=a.limitToLast(e.limitToLast)),a}},{key:"getObject",value:function(a,e){var t=this._databaseRef.child(a);return t=e?this._setQuery(t,e):t,Rx.Observable.create(function(a){try{t.on("value",function(e){a.next(e.val())})}catch(e){a.error(e)}})}},{key:"getList",value:function(a,e){return this.getObject(a,e).map(function(a){return a?Object.keys(a).map(function(e){return{$key:e,val:a[e]}}):[]})}},{key:"save",value:function(a,e){return this._databaseRef.child(a).push(e)}},{key:"update",value:function(a,e){var t={};return t[a]=e||!0,this._databaseRef.update(t)}},{key:"getStorageItemRef",value:function(a){return this._storageRef.child(a)}},{key:"saveStorageItem",value:function(a,e){var t=this.getStorageItemRef(a);return t.put(e)}}]),a}()},{}],7:[function(a,e,t){"use strict";function n(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function a(a,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(a,n.key,n)}}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}();t.PostsService=function(){function a(e,t,r,l,i){n(this,a),this.postsUrl=e,this._authService=t,this._dataService=r,this._usersService=l,this._keyGenerator=i}return r(a,[{key:"_findPostsByKeys",value:function(a){var e=this;return a.map(function(a){return a.map(function(a){return e.findPostByKey(a)})}).flatMap(function(a){return Rx.Observable.combineLatest(a)})}},{key:"_findPostKeysByUserKey",value:function(a){var e=this.postsUrl+"PerUser/"+a;return this._dataService.getList(e).map(function(a){return a.map(function(a){return a.$key})})}},{key:"_savePost",value:function(a){var e=this,t=this._authService.userId,n=(new Date).toString();return this._usersService.getUserByKey(t).first().map(function(a){return a.name}).map(function(e){a.userId=t,a.username=e,a.added=n}).map(function(){return e._dataService.save(e.postsUrl,a)}).map(function(a){var n=e.postsUrl+"PerUser/"+t,r=a.key,l={};l[r]=!0,e._dataService.update(n,l)}).toPromise()}},{key:"_savePostImage",value:function(a){var e=this._keyGenerator.generate();return this._dataService.saveStorageItem(e,a).then(function(a){return a.downloadURL})}},{key:"createPost",value:function(a,e){var t=this;return e?this._savePostImage(e).then(function(e){a.imageUrl=e}).then(function(){return t._savePost(a)}):this._savePost(this.postsUrl,a)}},{key:"updatePost",value:function(a,e,t){var n=this,r=a.key;return t?this._savePostImage(t).then(function(a){e.image=a}).then(function(){return n._dataService.update(r,e)}):this._dataService.update(r,e)}},{key:"findPostByKey",value:function(a){var e=this.postsUrl+"/"+a;return this._dataService.getObject(e)}},{key:"findAllPosts",value:function(){return this._dataService.getList(this.postsUrl)}},{key:"findLastestsPosts",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12,e={limitToLast:a};return this._dataService.getList(this.postsUrl,e)}},{key:"findPostsByUserKey",value:function(a){return this._findPostsByKeys(this._findPostKeysByUserKey(a))}}]),a}()},{}],8:[function(a,e,t){"use strict";function n(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function a(a,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(a,n.key,n)}}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}();t.UsersService=function(){function a(e){n(this,a),this._dataService=e,this._usersUrl="users"}return r(a,[{key:"createUser",value:function(a,e){var t=this._usersUrl+"/"+a,n={};return n[t]=e,this._dataService.update(n)}},{key:"updateUser",value:function(a,e){var t=this._usersUrl+"/"+a,n={};return n[t]=e,this._dataService.update(n)}},{key:"getAllUsers",value:function(a){return this._dataService.getList(this._usersUrl,a)}},{key:"getUserByKey",value:function(a){var e=this._usersUrl+"/"+a;return this._dataService.getObject(e)}}]),a}()},{}],9:[function(a,e,t){"use strict";function n(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function a(a,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(a,n.key,n)}}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}();t.KeyGenerator=function(){function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;n(this,a),this._chars="qwertyuiopasdfghjklzxcvbnmQWERTYUIOPASDFGHJKLZXCVBNM!@()_-1234567890",this._timestampLength=13,this._length=e-this._timestampLength}return r(a,[{key:"_getRandomNumber",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE;return Math.floor(Math.random()*(e-a))+a}},{key:"generate",value:function(){for(var a=(+new Date).toString(),e=a,t=0;t<this._length;t+=1){var n=this._getRandomNumber(0,this._chars.length),r=this._chars[n];e+=r}return e}}]),a}()},{}],10:[function(a,e,t){"use strict";function n(a){if(a&&a.__esModule)return a;var e={};if(null!=a)for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t]);return e.default=a,e}function r(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.TemplatesLoader=void 0;var l=function(){function a(a,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(a,n.key,n)}}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}(),i=a("../../bower_components/handlebars-paginate/index"),o=n(i);t.TemplatesLoader=function(){function a(){r(this,a),this._handlebars=window.Handlebars,this._cache={},this._handlebars.registerHelper("paginate",o.default)}return l(a,[{key:"get",value:function(a){var e=this,t=new Promise(function(t,n){if(e._cache[a])return void t(e._cache[a]);var r="templates/"+a+".handlebars";$.get(r,function(n){var r=e._handlebars.compile(n);e._cache[a]=r,t(r)}).fail(function(){return n("Cannot load the template")})});return t}}]),a}()},{"../../bower_components/handlebars-paginate/index":1}]},{},[2]);